{% import "_macros.html" as macros %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../../../favicon.ico">

    <title></title>

    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/static/css/starter-template.css" rel="stylesheet">
  </head>

  <body>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="/">Сервисные работы</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Регистратор</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Отчеты</a>
          </li>
          {% if current_user.role_id == 1 %}
          <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Администрирование</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="/add_user">Пользователи</a>
          <a class="dropdown-item" href="#">Регионы</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
          </li>
          {% endif %}
        </ul>

        <div class="btn-group">
          <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {{current_user.username}}
          </button>
          <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" href="#">Профиль</a>
            <!-- <a class="dropdown-item" href="#">Something else here</a> -->
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/logout">Выйти</a>
          </div>
        </div>
      </div>
    </nav>

    <main role="main" class="container">

<br>
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#AddModal">Добавить</button>
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#SortModal">Сортировать</button>
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#FilterModal">Фильтр</button>

<div class="modal fade" id="AddModal" tabindex="-1" role="dialog" aria-labelledby="AddModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="AddModalLabel">Добавление нового регистратора</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

  <form class="form-group w-100" method="POST">
  {{ form.csrf_token() }}
  <div class="form-group row">
    <label class="col-sm-2 col-form-label " for="FormInputSerialNum">Серийный</label>
    <div class="col-sm-7">
  {{ form.serial_num(type="text", class="form-control  mb-2 mr-sm-2", id="FormInputSerialNum") }}
   </div>
  </div>
  <div class="form-group row">
  <label class="col-sm-2 col-form-label" for="FormInputIP1">IP(осн.)</label>
  <div class="col-sm-7">
  {{ form.ip_addr_1(type="text", class="form-control mb-2 mr-sm-2", id="FormInputIP1" ) }}
  </div>
  </div>
  <div class="form-group row">
   <label class="col-sm-2 col-form-label" for="FormInputIP2">IP(евц)</label>
   <div class="col-sm-7">
  {{ form.ip_addr_2(type="text", class="form-control mb-2 mr-sm-2", id="FormInputIP2") }}
   </div>
  </div>

  <div class="form-group row">
  <label class="col-sm-2 col-form-label" for="FormInputRegid">Рег.ид.</label>
  <div class="col-sm-7">
  {{ form.reg_id(type="text", class="form-control mb-2 mr-sm-2", id="FormInputRegid") }}
  </div>
  </div>

  <div class="form-group row">
 <label class="col-sm-2 col-form-label" for="FormInputRegion2">Регион</label>
  <div class="col-sm-7">
  {{ form.region(type="text", class="form-control  mb-2 mr-sm-2", id="FormInputRegion2") }}
  </div>
  </div>  

  <div class="form-group row">
    <div class="col-sm-7">
  {{ form.submit(type="submit", class="btn btn-primary mb-2") }}
    </div>
  </div>

</form>
    </div>
    </div>
  </div>
</div>

<br>
<br>

{% for category, message in get_flashed_messages(with_categories=true) %} 
      <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
    {{message}}.
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{% endfor %}

{{table}}

<br>
<div class="pagination">
    {{ macros.pagination_widget(pagination, 'index') }}
</div>

    </main><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="/static/js/bootstrap.min.js"></script>
  </body>
</html>
